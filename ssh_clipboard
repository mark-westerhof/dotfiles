CLIPBOARD_FORWARD_PORT=5553
CLIPBOARD_LISTEN_PORT=5554
CLIPBOARD_CMD='xsel -b'
if [ "$(uname)" == "Darwin" ]; then
    CLIPBOARD_CMD='pbcopy'
fi

function ssh_clipboard() {
    ssh -L $CLIPBOARD_FORWARD_PORT:localhost:$CLIPBOARD_LISTEN_PORT \
         -R $CLIPBOARD_FORWARD_PORT:localhost:$CLIPBOARD_LISTEN_PORT $1
}
alias remoteclip='nc -q0 localhost $CLIPBOARD_FORWARD_PORT'

while (true); do nc -l 5554 | $CLIPBOARD_CMD; done &
echo "Listening on port 554 for clipboard updates"
